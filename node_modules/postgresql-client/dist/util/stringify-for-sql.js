"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.stringifyValueForSQL = exports.stringifyArrayForSQL = void 0;
const escape_literal_1 = require("./escape-literal");
const UuidType_1 = require("../data-types/UuidType");
function stringifyArrayForSQL(v, options, encode) {
    const arr = v.map(x => stringifyValueForSQL(x, options, encode));
    return 'ARRAY[' + arr.join(',') + ']';
}
exports.stringifyArrayForSQL = stringifyArrayForSQL;
function stringifyValueForSQL(v, options, encode) {
    if (v == null)
        return 'null';
    if (typeof v === 'boolean')
        return v ? 'true' : 'false';
    if (Array.isArray(v))
        return stringifyArrayForSQL(v, options, encode);
    if (encode)
        v = encode(v, options || {});
    if (typeof v === 'number')
        return '' + v;
    if (typeof v === 'bigint')
        return v.toString();
    if (typeof v === 'string' && UuidType_1.UuidType.isType(v))
        return (0, escape_literal_1.escapeLiteral)('' + v) + '::uuid';
    if (typeof v === 'object')
        return (0, escape_literal_1.escapeLiteral)(JSON.stringify(v));
    return (0, escape_literal_1.escapeLiteral)('' + v);
}
exports.stringifyValueForSQL = stringifyValueForSQL;
